# 合约部署说明

## 合约简介

该合约位于 `contract`文件夹下，实现了一组用于链上加密/解密、信封（envelope）处理及辅助工具的函数，设计用于与长安链（ChainMaker）环境配合运行。

合约源码包含加密插件、信封处理逻辑和若干工具函数，适用于在链上进行对称/非对称加密、保护敏感数据并与链上其它合约或客户端交互的场景。

**重要版本说明：该合约只能部署在长安链（ChainMaker）节点软件版本 v2.3.0 及以上**。低于 v2.3.0 的版本由于运行时或 SDK 接口差异，可能无法正确加载或执行本合约。

## 功能要点

* 提供非对称加密相关插件逻辑（AsymEncrypt）用于公私钥加密、签名或验证。
* 提供“信封（Envelope）”相关插件，用于封装加密后的数据及元信息，便于安全传输或存储。
* 包含若干工具函数（utils）用于处理密钥、序列化、随机数或其他常用加密操作。
* secrets.go 可能包含合约所需的常量或与密钥管理相关的辅助逻辑（请在部署前检查不包含明文秘密）。

## 文件说明

* chainQAContractSrc：源代码
  * `main.go`：合约入口文件，通常包含合约初始化、路由函数（Dispatch）以及合约暴露的入口方法。部署时该文件用于编译合约二进制/插件。
  * `go.mod`：Go module 配置，列出依赖及模块路径。
  * `plugin_AsymEncrypt.go`：非对称加密相关的实现（公钥/私钥加密、解密、签名或验证等）。负责实现具体加密算法调用与参数解析。
  * `plugin_Envelope.go`：信封封装/解封装逻辑，实现将加密数据与元信息打包或解析的功能。
  * `plugin_utils.go`：通用工具函数，如序列化、编码、辅助错误处理等，供其它插件文件调用。
  * `secrets.go`：与密钥或敏感配置相关的代码。务必在部署前审查，确保不包含硬编码的生产私钥或敏感信息。
* `chainQA（合约编译二进制）.7z`：合约编译二进制（docker-go）


## 构建与部署建议

* **该合约只能部署在长安链（ChainMaker）节点软件版本 v2.3.0 及以上**。
* 请参考长安链文档[合约编译](https://docs.chainmaker.org.cn/v2.3.7/html/instructions/%E4%BD%BF%E7%94%A8SmartIDE%E7%BC%96%E5%86%99Go%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6.html#id14)进行合约编译。
  * 您可以使用长安链官方提供的长安链合约IDE （Chainmaker SmartEditor， 地址：[https://ide230.chainmaker.org.cn/](https://ide230.chainmaker.org.cn/)）进行合约编译，或在本地使用 Docker 环境进行编译。
* 请参考长安链文档[部署合约](https://docs.chainmaker.org.cn/v2.3.7/html/dev/%E9%95%BF%E5%AE%89%E9%93%BE%E7%AE%A1%E7%90%86%E5%8F%B0.html#id49)进行合约部署。
  * 请确保您已经正确部署了区块链。
